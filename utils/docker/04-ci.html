<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CI/CD | Forest</title>
    <meta name="description" content="笔记记录、阅读">
    <link rel="stylesheet" href="/assets/style.abb680c9.css">
    <link rel="modulepreload" href="/assets/Home.27ba9be6.js">
    <link rel="modulepreload" href="/assets/app.ee89e8a3.js">
    <link rel="modulepreload" href="/assets/utils_docker_04-ci.md.15e77a88.lean.js">
    <link rel="modulepreload" href="/assets/app.ee89e8a3.js">
    <meta name="twitter:title" content="CI/CD | Forest">
    <meta property="og:title" content="CI/CD | Forest">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-7161a24b><div class="sidebar-button" data-v-7161a24b><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Forest, back to home" data-v-7161a24b data-v-4a583abe><!----> Forest</a><div class="flex-grow" data-v-7161a24b></div><div class="nav" data-v-7161a24b><nav class="nav-links" data-v-7161a24b data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/" data-v-641633f9>首页 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>前端</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/js/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>javascript</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/vue/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>vue</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/react/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>react</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/typescript/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Ts</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/node/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>node</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/nest/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>nest</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/react-native/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>react-native</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/go/" data-v-641633f9>Go <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>工具</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/utils/git/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Git</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item active" href="/utils/docker/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Docker</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/other/" data-v-641633f9>其他 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/Forest-211" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-6b49cdcd><nav class="nav-links nav" data-v-6b49cdcd data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/" data-v-641633f9>首页 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>前端</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/js/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>javascript</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/vue/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>vue</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/react/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>react</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/typescript/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Ts</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/node/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>node</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/nest/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>nest</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/front-end/react-native/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>react-native</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/go/" data-v-641633f9>Go <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>工具</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/utils/git/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Git</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item active" href="/utils/docker/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Docker</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/other/" data-v-641633f9>其他 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/Forest-211" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-6b49cdcd><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/utils/docker/">Docker</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/utils/docker/01-docker">docker</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/utils/docker/02-docker-compose">docker-compose</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/utils/docker/03-Dockerfile">Dockerfile</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/utils/docker/04-ci">CI/CD</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#为什么使用ci-cd">为什么使用CI/CD</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#概念介绍">概念介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ci-持续集成">CI 持续集成</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#cd-持续部署">CD 持续部署</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#github-action">Github Action</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#概览">概览</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#github-actions-的组件">GitHub Actions 的组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#创建示例工作流程">创建示例工作流程</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#了解工作流程文件">了解工作流程文件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#查看作业的活动">查看作业的活动</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="ci-cd"><a class="header-anchor" href="#ci-cd" aria-hidden="true">#</a> CI/CD</h1><h2 id="为什么使用ci-cd"><a class="header-anchor" href="#为什么使用ci-cd" aria-hidden="true">#</a> 为什么使用CI/CD</h2><p>众所周知，前端部署无非就是把打包之后的代码丢到 nginx html 目录下就完事了，但是每逢产品频繁改需求，甚至只是让你改线上一个字的时候，你总要重复一遍遍以下动作：修改，打包，登录服务器，上传代码，重启服务器。周而复始，还没完没了了；别说是你受不了了，搁我旁边看着都受不了。这个时候，有没有想过有个机器人，能帮我们完成以上这些重复又没技术含量的活。没错，你猜对了，可以使用自动化帮助我们完成这些重复的工作。</p><h2 id="概念介绍"><a class="header-anchor" href="#概念介绍" aria-hidden="true">#</a> 概念介绍</h2><p>在软件开发的过程中，会经历多次的迭代更新。每次更新，有的是为了修复历史的bug，有的是为了引入新的功能。伴随这这些新的改动，必然也会导致代码的变动，而代码的变动则会导致项目出现bug；或者新代码虽然没有问题，但是代码写的很烂，对未来维护项目带来困难</p><p>以前并不是没有CI/CD流程，而是以前的流程是人工的，繁琐的。只要是人工的，每次都必然是不稳定的，都是手工艺品，正如同我们编写代码一样，总是充满着各种问题，并且耗时甚久。</p><p>而为了解决上面的问题，我们需要尽量引入自动化工具和流程，为我们减轻审核代码负担，减轻部署项目的时间，以便于更快的交付新功能，修复遗留的bug，并且每次都能稳定的成功部署项目，把软件交付给我们的用户。</p><h2 id="ci-持续集成"><a class="header-anchor" href="#ci-持续集成" aria-hidden="true">#</a> CI 持续集成</h2><p>集成指的是开发过程中，新代码逐渐通过各种检测合入项目主干的过程。 在这个过程中，一般会做这样一些事情：</p><ul><li><p>代码检查(review)</p></li><li><p>风格检查:</p><p>对代码规范进行检查，看看是不是有长函数，大小写不规范，公开函数不写注释这样的问题。</p></li><li><p>安全扫描:</p><p>检查代码中是否有安全漏洞，比如内存溢出，SQL注入，密钥泄露等风险。</p></li><li><p>功能走查:</p><p>一般是请另一名开发人员检查代码逻辑是否有问题，代码实现方法是否合理。</p></li><li><p>集成测试</p></li></ul><p>测试新代码的程序是否能正常工作，是否和预期一致。</p><h2 id="cd-持续部署"><a class="header-anchor" href="#cd-持续部署" aria-hidden="true">#</a> CD 持续部署</h2><p>部署就是把编译成功的程序成功交付给用户的过程。网站型软件就是部署到生产服务器，也有客户端软件就是上传到应用商店等。由于这个部分根据不同的项目，公司，环境五花八门，自然也难以统一展示，因此本项目注重于展示上面的CI部分</p><h2 id="github-action"><a class="header-anchor" href="#github-action" aria-hidden="true">#</a> Github Action</h2><h3 id="概览"><a class="header-anchor" href="#概览" aria-hidden="true">#</a> 概览</h3><p>GitHub Actions 帮助您自动完成软件开发周期内的任务。 GitHub Actions 是事件驱动的，意味着您可以在指定事件发生后运行一系列命令。 例如，每次有人为仓库创建拉取请求时，您都可以自动运行命令来执行软件测试脚本。</p><p>此示意图说明如何使用 GitHub Actions 自动运行软件测试脚本。 事件会自动触发其中包<em>作业</em>的<em>工作流程</em>。 然后，作业使用<em>步骤</em>来控制<em>操作</em>运行的顺序。 这些操作是自动化软件测试的命令。</p><p><img src="/assets/overview-actions-simple.b9958d75.png" alt="工作流程概述"></p><h3 id="github-actions-的组件"><a class="header-anchor" href="#github-actions-的组件" aria-hidden="true">#</a> GitHub Actions 的组件</h3><p>下面是一起运行作业的多个 GitHub Actions 组件列表。 您可以查看这些组件如何相互作用。</p><p><img src="/assets/overview-actions-design.a7be4d25.png" alt="组件和服务概述"></p><h4 id="工作流程"><a class="header-anchor" href="#工作流程" aria-hidden="true">#</a> 工作流程</h4><p>工作流程是您添加到仓库的自动化过程。 工作流程由一项或多项作业组成，可以计划或由事件触发。 工作流程可用于在 GitHub 上构建、测试、打包、发布或部署项目。</p><h4 id="事件"><a class="header-anchor" href="#事件" aria-hidden="true">#</a> 事件</h4><p>事件是触发工作流程的特定活动。 例如，当有推送提交到仓库或者创建议题或拉取请求时，GitHub 就可能产生活动。 您还可以使用<a href="https://docs.github.com/cn/rest/reference/repos#create-a-repository-dispatch-event" target="_blank" rel="noopener noreferrer">仓库分发 web 挂钩</a>在发生外部事件时触发工作流程。 有关可用于触发工作流程的事件的完整列表，请参阅<a href="https://docs.github.com/cn/actions/reference/events-that-trigger-workflows" target="_blank" rel="noopener noreferrer">触发工作流程的事件</a>。</p><h4 id="jobs"><a class="header-anchor" href="#jobs" aria-hidden="true">#</a> Jobs</h4><p>作业是在同一运行服务器上执行的一组步骤。 默认情况下，包含多个作业的工作流程将同时运行这些作业。 您也可以配置工作流程按顺序运行作业。 例如，工作流程可以有两个连续的任务来构建和测试代码，其中测试作业取决于构建作业的状态。 如果构建作业失败，测试作业将不会运行。</p><h4 id="步骤"><a class="header-anchor" href="#步骤" aria-hidden="true">#</a> 步骤</h4><p>步骤是可以在作业中运行命令的单个任务。 步骤可以是<em>操作</em>或 shell 命令。 作业中的每个步骤在同一运行器上执行，可让该作业中的操作互相共享数据。</p><h4 id="操作"><a class="header-anchor" href="#操作" aria-hidden="true">#</a> 操作</h4><p><em>操作</em> 是独立命令，它们组合到<em>步骤</em>以创建<em>作业</em>。 操作是工作流程最小的便携式构建块。 您可以创建自己的操作，也可以使用 GitHub 社区创建的操作。 要在工作流程中使用操作，必须将其作为一个步骤。</p><h4 id="运行器"><a class="header-anchor" href="#运行器" aria-hidden="true">#</a> 运行器</h4><p>运行器是安装了 <a href="https://github.com/actions/runner" target="_blank" rel="noopener noreferrer">GitHub Actions 运行器应用程序</a>的服务器。 您可以使用 GitHub 托管的运行器，也可以托管您自己的运行器。 运行器将侦听可用的作业，每次运行一个作业，并将进度、日志和结果报告回 GitHub。 GitHub 托管的运行器基于 Ubuntu Linux、Microsoft Windows 和 macOS，并且工作流程中的每个作业都在新的虚拟环境中运行。 有关 GitHub 托管的运行器的信息，请参阅“<a href="https://docs.github.com/cn/actions/using-github-hosted-runners/about-github-hosted-runners" target="_blank" rel="noopener noreferrer">关于 GitHub 托管的运行器</a>”。 如果您需要不同的操作系统或需要特定的硬件配置，可以托管自己的运行器。 有关自托管运行器的信息，请参阅“<a href="https://docs.github.com/cn/actions/hosting-your-own-runners" target="_blank" rel="noopener noreferrer">托管您自己的运行器</a>”。</p><h3 id="创建示例工作流程"><a class="header-anchor" href="#创建示例工作流程" aria-hidden="true">#</a> 创建示例工作流程</h3><p>GitHub Actions 使用 YAML 语法来定义事件、作业和步骤。 这些 YAML 文件存储在代码仓库中名为 <code>.github/workflows</code> 的目录中。</p><p>您可以在仓库中创建示例工作流程，只要推送代码，该工作流程就会自动触发一系列命令。 在此工作流程中，GitHub Actions 检出推送的代码，安装软件依赖项，并运行 <code>-v</code>。</p><ol><li><p>在您的仓库中，创建 <code>.github/workflows/</code> 目录来存储工作流程文件。</p></li><li><p>在<code>.github/workflows/</code>目录中，创建一个名为</p><div class="language-"><pre><code>learn-github-actions.yml
</code></pre></div><p>的新文件并添加以下代码。</p><div class="language-yaml"><pre><code><span class="token key atrule">name</span><span class="token punctuation">:</span> learn<span class="token punctuation">-</span>github<span class="token punctuation">-</span>actions
<span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>push<span class="token punctuation">]</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">check-bats-version</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install <span class="token punctuation">-</span>g bats
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> bats <span class="token punctuation">-</span>v
</code></pre></div></li><li><p>提交这些更改并将其推送到您的 GitHub 仓库。</p></li></ol><p>您的新 GitHub Actions 工作流程文件现在安装在您的仓库中，每次有人推送更改到仓库时都会自动运行。 有关作业的执行历史记录的详细信息，请参阅“<a href="https://docs.github.com/cn/actions/learn-github-actions/introduction-to-github-actions#viewing-the-jobs-activity" target="_blank" rel="noopener noreferrer">查看工作流程的活动</a>”。</p><h3 id="了解工作流程文件"><a class="header-anchor" href="#了解工作流程文件" aria-hidden="true">#</a> <a href="https://docs.github.com/cn/actions/learn-github-actions/introduction-to-github-actions#understanding-the-workflow-file" target="_blank" rel="noopener noreferrer">了解工作流程文件</a></h3><p>为帮助您了解如何使用 YAML 语法来创建工作流程文件，本节解释介绍示例的每一行：</p><table><thead><tr><th><code>name: learn-github-actions</code></th><th><em>可选</em> - 将出现在 GitHub 仓库的 Actions（操作）选项卡中的工作流程名称。</th></tr></thead><tbody><tr><td><code>on: [push]</code></td><td>指定自动触发工作流程文件的事件。 此示例使用 <code>push</code> 事件，这样每次有人推送更改到仓库时，作业都会运行。 您可以设置工作流程仅在特定分支、路径或标记上运行。 有关包含或排除分支、路径或标记的语法示例，请参阅<a href="https://docs.github.com/actions/reference/workflow-syntax-for-github-actions#onpushpull_requestpaths" target="_blank" rel="noopener noreferrer">“GitHub Actions 的工作流程语法”</a>。</td></tr><tr><td><code>jobs:</code></td><td>将 <code>learn-github-actions</code> 工作流程文件中运行的所有作业组合在一起。</td></tr><tr><td><code>check-bats-version:</code></td><td>定义存储在 <code>jobs</code> 部分的 <code>check-bats-version</code> 作业的名称。</td></tr><tr><td><code> runs-on: ubuntu-latest</code></td><td>配置作业在 Ubuntu Linux 运行器上运行。 这意味着该作业将在 GitHub 托管的新虚拟机上执行。 有关使用其他运行器的语法示例，请参阅<a href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on" target="_blank" rel="noopener noreferrer">“GitHub Actions 的工作流程语法”</a>。</td></tr><tr><td><code> steps:</code></td><td>将 <code>check-bats-version</code> 作业中运行的所有步骤组合在一起。 此部分下嵌套的每项都是一个单独的操作或 shell 命令。</td></tr><tr><td><code> - uses: actions/checkout@v2</code></td><td><code>uses</code> 关键字指示作业检索名为 <code>actions/checkout@v2</code> 的社区操作的 <code>v2</code>。 这是检出仓库并将其下载到运行器的操作，允许针对您的代码运行操作（例如测试工具）。 只要工作流程针对仓库的代码运行，或者您使用仓库中定义的操作，您都必须使用检出操作。</td></tr><tr><td><code> - uses: actions/setup-node@v1</code></td><td>此操作会在运行器上安装 <code>node</code> 软件包，使您可以访问 <code>npm</code> 命令。</td></tr><tr><td><code> - run: npm install -g bats</code></td><td><code>run</code> 关键字指示作业在运行器上执行命令。 在这种情况下，使用 <code>npm</code> 来安装 <code>bats</code> 软件测试包。</td></tr><tr><td><code> - run: bats -v</code></td><td>最后，您将运行 <code>bats</code> 命令，并且带有输出软件版本的参数。</td></tr></tbody></table><h4 id="可视化工作流程文件"><a class="header-anchor" href="#可视化工作流程文件" aria-hidden="true">#</a> <a href="https://docs.github.com/cn/actions/learn-github-actions/introduction-to-github-actions#visualizing-the-workflow-file" target="_blank" rel="noopener noreferrer">可视化工作流程文件</a></h4><p>在此关系图中，您可以看到刚刚创建的工作流程文件，以及 GitHub Actions 组件在层次结构中的组织方式。 每个步骤执行单个操作或 shell 命令。 步骤 1 和 2 使用预构建的社区操作。 步骤 3 和 4 直接在运行器上运行 shell 命令。 要查找更多为工作流预构建的操作，请参阅“<a href="https://docs.github.com/cn/actions/learn-github-actions/finding-and-customizing-actions" target="_blank" rel="noopener noreferrer">查找和自定义操作</a>”。</p><p><img src="/assets/overview-actions-event.d2a27fe0.png" alt="工作流程概述"></p><h3 id="查看作业的活动"><a class="header-anchor" href="#查看作业的活动" aria-hidden="true">#</a> <a href="https://docs.github.com/cn/actions/learn-github-actions/introduction-to-github-actions#viewing-the-jobs-activity" target="_blank" rel="noopener noreferrer">查看作业的活动</a></h3><p>作业开始运行后，您可以 查看运行进度的可视化图以及查看 GitHub 上每个步骤的活动。</p><ol><li>在 GitHub 上，导航到仓库的主页面。</li><li>在仓库名称下，单击 <strong>Actions（操作）</strong>。<img src="/assets/learn-github-actions-repository.1237dbb3.png" alt="导航到仓库"></li><li>在左侧边栏中，单击您想要查看的工作流程。<img src="/assets/learn-github-actions-workflow.bab4391f.png" alt="工作流程结果的屏幕截图"></li><li>在“Workflow runs（工作流程运行）”下，单击您想要查看的运行的名称。<img src="/assets/learn-github-actions-run.4e5c35ff.png" alt="工作流程运行的屏幕截图"></li><li>在 **Jobs（作业）**下或可视化图中，单击您要查看的作业。<img src="/assets/overview-actions-result-navigate.54a8c70c.png" alt="选择作业"></li><li>查看每个步骤的结果。<img src="/assets/overview-actions-result-updated-2.c1304b9d.png" alt="工作流程运行详细信息的屏幕截图"></li></ol></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/utils/docker/03-Dockerfile" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Dockerfile</span></a></div><div class="next" data-v-38ede35f><!----></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"470770f9\",\"go_00-起步.md\":\"974c826b\",\"go_01-基础.md\":\"b44f57bf\",\"go_02-数组与切片.md\":\"cb98c33f\",\"go_03-流程控制与循环.md\":\"5c3a3d86\",\"go_04-map.md\":\"a3309bf3\",\"go_05-函数.md\":\"9c32cc73\",\"go_06-结构体与方法.md\":\"a49650f1\",\"go_07-接口.md\":\"5f0d00c8\",\"go_08-协程与通道.md\":\"53911140\",\"go_09-并发资源.md\":\"5cc18d6f\",\"go_10-测试.md\":\"c530eb86\",\"go_11-反射.md\":\"d9aff128\",\"go_12-web开发基础.md\":\"58f15085\",\"go_index.md\":\"a1953f12\",\"interview_index.md\":\"f84e817f\",\"other_01.md\":\"c4024539\",\"other_index.md\":\"938c5cf0\",\"project_index.md\":\"d74863e0\",\"database_mongodb_01-mongodb.md\":\"9fc0396a\",\"database_mongodb_index.md\":\"17e72bf3\",\"database_mysql_index.md\":\"620cf900\",\"database_redis_index.md\":\"6758b846\",\"front-end_js_base.md\":\"036440dd\",\"front-end_js_index.md\":\"a2ad98e5\",\"front-end_nest_01.md\":\"5b6a5eda\",\"front-end_nest_index.md\":\"9c632ebe\",\"front-end_node_1-webpack5-node.md\":\"f60da444\",\"front-end_node_index.md\":\"02485f5f\",\"front-end_react_index.md\":\"ce81e05d\",\"front-end_react-native_01.md\":\"6388b4ae\",\"front-end_react-native_02.md\":\"a29bb19d\",\"front-end_react-native_03.md\":\"3ea72e62\",\"front-end_react-native_04.md\":\"d6ec6eaf\",\"front-end_react-native_05.md\":\"edcb71f2\",\"front-end_react-native_index.md\":\"cb44f5ea\",\"front-end_typescript_01-环境准备.md\":\"45d081f9\",\"front-end_typescript_02-为什么要学习typescript.md\":\"5015208e\",\"front-end_typescript_03-类型全解.md\":\"9606c83b\",\"front-end_typescript_index.md\":\"4ad457d8\",\"front-end_vue_index.md\":\"dbe6df17\",\"front-end_wechat_index.md\":\"cbeea01e\",\"utils_docker_01-docker.md\":\"bc995295\",\"utils_docker_02-docker-compose.md\":\"d1485c12\",\"utils_docker_03-dockerfile.md\":\"e5cbe1b2\",\"utils_docker_04-ci.md\":\"15e77a88\",\"utils_docker_index.md\":\"254efdb8\",\"utils_git_01.md\":\"9d00e453\",\"utils_git_02.md\":\"74c6a7f0\",\"utils_git_03.md\":\"45353c62\",\"utils_git_index.md\":\"f90b6f92\"}")</script>
    <script type="module" async src="/assets/app.ee89e8a3.js"></script>
  </body>
</html>