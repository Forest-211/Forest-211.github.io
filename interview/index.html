<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      面试题 | Forest
    </title>
    <meta name="description" content="笔记记录、阅读">
    <link rel="stylesheet" href="/assets/style.3d4e16a3.css">
    <link rel="modulepreload" href="/assets/Home.dce0e87a.js">
    <link rel="modulepreload" href="/assets/app.e8bd60e9.js">
    <link rel="modulepreload" href="/assets/interview_index.md.ccbfce6f.lean.js">
    <link rel="modulepreload" href="/assets/app.e8bd60e9.js">
    
    
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-5df6160f><div class="sidebar-button" data-v-5df6160f><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Forest, back to home" data-v-5df6160f data-v-8dbfef3c><!----> Forest</a><div class="flex-grow" data-v-5df6160f></div><div class="nav" data-v-5df6160f><nav class="nav-links" data-v-5df6160f data-v-38e3b123><!--[--><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/" data-v-45eb32c6>首页 <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-dropdown-link" data-v-38e3b123 data-v-6bbf01f6><button class="button" data-v-6bbf01f6><span class="button-text" data-v-6bbf01f6>基础</span><span class="right button-arrow" data-v-6bbf01f6></span></button><ul class="dialog" data-v-6bbf01f6><!--[--><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/js/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>javascript</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/vue/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>vue</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/react/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>react</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/babel/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>babel</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/webpack/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>webpack</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/wechat/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>微信小程序</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/node/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>node</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-38e3b123><div class="nav-dropdown-link" data-v-38e3b123 data-v-6bbf01f6><button class="button" data-v-6bbf01f6><span class="button-text" data-v-6bbf01f6>数据库</span><span class="right button-arrow" data-v-6bbf01f6></span></button><ul class="dialog" data-v-6bbf01f6><!--[--><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/mongoDB/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>mongoDB</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/redis/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>redis</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/mysql/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>mysql</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/project/" data-v-45eb32c6>项目 <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/go/" data-v-45eb32c6>Go <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item active" href="/interview/" data-v-45eb32c6>面试 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-58e261f2><nav class="nav-links nav" data-v-58e261f2 data-v-38e3b123><!--[--><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/" data-v-45eb32c6>首页 <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-dropdown-link" data-v-38e3b123 data-v-6bbf01f6><button class="button" data-v-6bbf01f6><span class="button-text" data-v-6bbf01f6>基础</span><span class="right button-arrow" data-v-6bbf01f6></span></button><ul class="dialog" data-v-6bbf01f6><!--[--><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/js/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>javascript</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/vue/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>vue</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/react/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>react</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/babel/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>babel</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/webpack/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>webpack</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/wechat/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>微信小程序</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/node/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>node</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-38e3b123><div class="nav-dropdown-link" data-v-38e3b123 data-v-6bbf01f6><button class="button" data-v-6bbf01f6><span class="button-text" data-v-6bbf01f6>数据库</span><span class="right button-arrow" data-v-6bbf01f6></span></button><ul class="dialog" data-v-6bbf01f6><!--[--><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/mongoDB/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>mongoDB</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/redis/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>redis</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/mysql/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>mysql</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/project/" data-v-45eb32c6>项目 <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/go/" data-v-45eb32c6>Go <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item active" href="/interview/" data-v-45eb32c6>面试 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-58e261f2><!--[--><li class="sidebar-link"><a class="sidebar-link-item active" href="/interview/">面试</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#keep-alive-组件有什么作用？">keep-alive  组件有什么作用？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#说下-vue-生命周期钩子函数">说下 vue 生命周期钩子函数?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#vue-中-computed-和-watch-区别">Vue 中 computed 和 watch 区别?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#react-的组件间通信都有哪些形式？">React 的组件间通信都有哪些形式？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#react-中如何实现路由懒加载？">React 中如何实现路由懒加载？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#react-的生命周期函数都有哪些，分别有什么作用？">React 的生命周期函数都有哪些，分别有什么作用？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#说一下-react-hooks-在平时开发中需要注意的问题和原因">说一下 React Hooks 在平时开发中需要注意的问题和原因?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#token-一般是存放在哪里-token-放在-cookie-和放在-localstorage、sessionstorage-中有什么不同">Token 一般是存放在哪里? Token 放在 cookie 和放在 localStorage、sessionStorage 中有什么不同?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#websocket-是怎么实现点对点通信和广播通信的？">WebSocket 是怎么实现点对点通信和广播通信的？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#客户端缓存有几种方式-浏览器出现-from-disk、from-memory-的-策略是啥">客户端缓存有几种方式?浏览器出现 from disk、from memory 的 策略是啥?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#说一下-cors-的简单请求和复杂请求的区别">说一下 CORS 的简单请求和复杂请求的区别?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#节流和防抖分别是什么？在什么场景下使用？请分别实现一个节流函数和一个防抖函数">节流和防抖分别是什么？在什么场景下使用？请分别实现一个节流函数和一个防抖函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#怎么禁止让-js-读取-cookie？怎么让-cookie-只在-https-下传输？">怎么禁止让 js 读取 cookie？怎么让 cookie 只在 HTTPS 下传输？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#v-if-和-v-for-为什么不能连用？">v-if 和 v-for 为什么不能连用？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#单页面应用和多页面应用区别及优缺点">单页面应用和多页面应用区别及优缺点?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#v-model-该如何实现？">v-model  该如何实现？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#vue2-中为什么检测不到数组的变化，如何解决">vue2 中为什么检测不到数组的变化，如何解决?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#在-react-项目中，想要进行逻辑复用-有哪些方案？">在 React 项目中，想要进行逻辑复用,有哪些方案？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#组件逻辑复用、组件视图复用">组件逻辑复用、组件视图复用</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#在-react-中，针对类组件-和-函数组件，分别怎么去进行性能优化？">在 React 中，针对类组件 和 函数组件，分别怎么去进行性能优化？</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-d36a7fda><div class="container" data-v-d36a7fda><!--[--><!--]--><div class="content" data-v-d36a7fda><div data-v-d36a7fda><h2 id="keep-alive-组件有什么作用？"><a class="header-anchor" href="#keep-alive-组件有什么作用？" aria-hidden="true">#</a> keep-alive  组件有什么作用？</h2><blockquote><p>主要用于保留组件状态或避免重新渲染。 包裹动态组件时，会缓存不活动的组件实例，而不是销毁它们。</p></blockquote><h2 id="说下-vue-生命周期钩子函数"><a class="header-anchor" href="#说下-vue-生命周期钩子函数" aria-hidden="true">#</a> 说下 vue 生命周期钩子函数?</h2><blockquote><p>-Vue 实例创建阶段的生命周期函数</p><ul><li>初始化事件及生命周期函数 <ul><li>brforeCreate() ---------- data 和 methods 中的数据都还没有初始化</li><li>创建中，正在初始化 data 和 methods</li><li>Created() -------------- 如果需要操作 data 中的数据或操作方法，可以放在这个函数里</li></ul></li><li>开始编译模板 <ul><li>beforeMount() --------- 模板编译好了，但是还没有放到页面中去 - 把编译好的模板放到浏览器中去进行渲染</li><li>mounted() ------------- 页面渲染完成，Vue 实例初始化完毕</li></ul></li><li>Vue 实例运行阶段的生命周期函数 <ul><li>如果数据发生改变 <ul><li>beforeUpdate() -------- 页面数据还没有更新，但是 data 中的数据已经更新完毕，页面与数据不同步</li></ul></li><li>Diff, 这一步执行，是先根据 data 中的最新数据，在内存中重新计算出一份 dom 树，对比新老两个 dom 树之间的差异... <ul><li>update() ---------------- 这时候，数据和页面已经完成更新</li></ul></li></ul></li><li>Vue 实例销毁阶段的生命周期函数 <ul><li>beforeDestroy() -------- 销毁执行之前，实例身上所有的数据和事件，指令等等都可以用，此刻还没有真正执行销毁</li><li>destroyed() ------------- 执行这个函数的时候，组件中的数据，方法，指令，过滤器等等完全销毁</li></ul></li></ul></blockquote><h2 id="vue-中-computed-和-watch-区别"><a class="header-anchor" href="#vue-中-computed-和-watch-区别" aria-hidden="true">#</a> Vue 中 computed 和 watch 区别?</h2><blockquote><ul><li>computed  是计算属性，依赖其他属性计算值，并且 computed  的值有缓存，只有当计算值变化才会返回内容。</li><li>watch  监听到值的变化就会执行回调，在回调中可以进行一些逻辑操作。</li></ul></blockquote><h2 id="react-的组件间通信都有哪些形式？"><a class="header-anchor" href="#react-的组件间通信都有哪些形式？" aria-hidden="true">#</a> React 的组件间通信都有哪些形式？</h2><blockquote><ul><li>父传子：在 React 中，父组件调用子组件时可以将要传递给子组件的数据添加在子组件的属性中，在子组件中通过 props 属性进行接收。这个就是父组件向子组件通信。</li><li>子传父：React 是单向数据流，数据永远只能自上向下进行传递。当子组件中有些数据需要向父级进行通信时，需要在父级中定义好回调，将回调传递给子组件，子组件调用父级传递过来的回调方法进行通信。</li><li>跨组件通信 - context。使用 context API，可以在组件中向其子孙级组件进行信息传递。</li></ul></blockquote><h2 id="react-中如何实现路由懒加载？"><a class="header-anchor" href="#react-中如何实现路由懒加载？" aria-hidden="true">#</a> React 中如何实现路由懒加载？</h2><p>在 React 16 中，新增了 lazy 方法，通过 lazy 方法可以轻松实现组件懒加载，当然要实现路由懒加载的话，其实也只需要把路由组件结合 lazy 使用即可。   参考代码如下：</p><div class="language-javascript"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">const</span> HomeView <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./home&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>路由懒加载<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>              
            <span class="token operator">&lt;</span>Route
                path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span>
                exact
                render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">(</span>
                        <span class="token operator">&lt;</span>Suspense
                            fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>组件Loading进来之前的占位内容<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span>
                        <span class="token operator">&gt;</span>
                                          
                            <span class="token operator">&lt;</span>HomeView <span class="token operator">/</span><span class="token operator">&gt;</span>
                                  
                        <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
                       
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre></div><p>在上述代码中使用 lazy 引入了一个动态组件，然后将该组件放入了根路由中。这样的话只有用户访问网站首页时，才会动态加载这个组件。注意在 React 规范中，lazy 和 Suspense 必须配合使用，lazy 引入的动态组件必须要放入 Suspense 中，Suspense 的 fallback 属性是 lazy 的组件没有加载进来之前的占位内容。</p><h2 id="react-的生命周期函数都有哪些，分别有什么作用？"><a class="header-anchor" href="#react-的生命周期函数都有哪些，分别有什么作用？" aria-hidden="true">#</a> React 的生命周期函数都有哪些，分别有什么作用？</h2><p>React 的生命周期已经经历了 3 次改动，最新的版本可以看下图：</p><blockquote><ul><li><p>挂载阶段：</p><ul><li>constructor: 初始化组件，初始化组件的 state 等。</li><li>static getDerivedStateFromProps()：该函数用于将 props 中的信息映射到 state 中。</li><li>render: 生成虚拟 DOM</li><li>componentDidMount：组件挂载完成，通过在该函数中去处理副作用 更新阶段：</li><li>static getDerivedStateFromProps()</li><li>shouldComponentUpdate()：该生命周期函数用于判断是否要进行组件更新。</li><li>render()：生成虚拟 DOM</li><li>getSnapshotBeforeUpdate()：组件已经完成 diff，即将更新真实 DOM，用户获取上一次的 DOM 快照。该函数必须搭配 componentDidUpdate 一块使用，返回值会变成 componentDidUpdate 第三个参数。</li><li>componentDidUpdate()： 组件更新完成，通常在该函数中进行副作用处理。</li></ul></li><li><p>即将卸载：</p><ul><li>componentWillUnmount：组件即将卸载，用于删除组件添加到全局的数据或事件。</li></ul></li></ul></blockquote><h2 id="说一下-react-hooks-在平时开发中需要注意的问题和原因"><a class="header-anchor" href="#说一下-react-hooks-在平时开发中需要注意的问题和原因" aria-hidden="true">#</a> 说一下 React Hooks 在平时开发中需要注意的问题和原因?</h2><ul><li>不要在循环，条件或嵌套函数中调用 Hook，必须始终在 React 函数的顶层使用 Hook</li></ul><p>这是因为 React 需要利用调用顺序来正确更新相应的状态，以及调用相应的钩子函数。一旦在循环或条件分支语句中调用 Hook，就容易导致调用顺序的不一致性，从而产生难以预料到的后果。</p><ul><li>使用 useState 时候，使用 push，pop，splice 等直接更改数组对象的坑</li></ul><p>使用 push 直接更改数组无法获取到新值，应该采用析构方式，但是在 class 里面不会有这个问题</p><p>代码示例</p><div class="language-javascript"><pre><code><span class="token keyword">function</span> <span class="token function">Indicatorfilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> setNums<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里坑是直接采用 push 去更新 num</span>
        <span class="token comment">// setNums(num)是无法更新 num 的</span>
        <span class="token comment">// 必须使用 num = [...num ,1]</span>
        num<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token comment">// num = [...num ,1]</span>
        <span class="token function">setNums</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;filter&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>test<span class="token punctuation">}</span><span class="token operator">&gt;</span>测试<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>num<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                    <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Indicatorfilter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span>any<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            nums<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>test <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// class 采用同样的方式是没有问题的</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>nums<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            nums<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>nums
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> nums <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>test<span class="token punctuation">}</span><span class="token operator">&gt;</span>测试<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span>nums<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token operator">:</span> any<span class="token punctuation">,</span> index<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>useState 设置状态的时候，只有第一次生效，后期需要更新状态，必须通过 useEffect</li></ul><p>看下面的例子</p><p>TableDeail 是一个公共组件，在调用它的父组件里面，我们通过 set 改变 columns 的值，以为传递给 TableDeail 的 columns 是最新的值，所以 tabColumn 每次也是最新的值，但是实际 tabColumn 是最开始的值，不会随着 columns 的更新而更新</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">TableDeail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> columns <span class="token punctuation">}</span><span class="token operator">:</span> TableData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>tabColumn<span class="token punctuation">,</span> setTabColumn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>columns<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 正确的做法是通过useEffect改变这个值</span>
<span class="token keyword">const</span> <span class="token function-variable function">TableDeail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> columns <span class="token punctuation">}</span><span class="token operator">:</span> TableData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>tabColumn<span class="token punctuation">,</span> setTabColumn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>columns<span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTabColumn</span><span class="token punctuation">(</span>columns<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>columns<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>善用 useCallback</li></ul><p>父组件传递给子组件事件句柄时，如果我们没有任何参数变动可能会选用 useMemo。但是每一次父组件渲染子组件即使没变化也会跟着渲染一次。</p><ul><li>不要滥用 useContext</li></ul><p>可以使用基于 useContext 封装的状态管理工具。</p><h2 id="token-一般是存放在哪里-token-放在-cookie-和放在-localstorage、sessionstorage-中有什么不同"><a class="header-anchor" href="#token-一般是存放在哪里-token-放在-cookie-和放在-localstorage、sessionstorage-中有什么不同" aria-hidden="true">#</a> Token 一般是存放在哪里? Token 放在 cookie 和放在 localStorage、sessionStorage 中有什么不同?</h2><blockquote><ul><li>Token 其实就是访问资源的凭证。</li><li>一般是用户通过用户名和密码登录成功之后，服务器将登陆凭证做数字签名，加密之后得到的字符串作为 token。</li><li>它在用户登录成功之后会返回给客户端，客户端主要有这么几种存储方式：存储在 localStorage 中，每次调用接口的时候都把它当成一个字段传给后台存储在 cookie 中，让它自动发送，不过缺点就是不能跨域拿到之后存储在 localStorage 中，每次调用接口的时候放在 HTTP 请求头的 Authorization 字段里</li><li>所以 token 在客户端一般存放于 localStorage，cookie，或 sessionStorage 中。将 token 存放在 webStroage 中，可以通过同域的 js 来访问 。这样会导致很容易受到 xss 攻击，特别是项目中引入很多 第三方 js 类库的情况下。如果 js 脚本被盗用，攻击者就 可以轻易访问你的网站，webStroage 作为一种储存机制，在传输过程中不会执行任何安全标准。</li><li>XSS 攻击：cross-site Scripting（跨站脚本攻击）是一种注入代码攻击 。恶意攻击者在目标网站上注入 script 代码，当访问者浏览网站的时候通过执行注入的 script 代码达到窃取用户信息，盗用用户身份等。</li><li>将 token 存放在 cookie 中可以指定 httponly，来防止被 Javascript 读取，也可以指定 secure，来保证 token 只在 HTTPS 下传输。缺点是不符合 Restful 最佳实践，容易受到 CSRF 攻击。</li><li>CSRF 跨站点请求伪造(Cross—Site Request Forgery)，跟 XSS 攻击一样，存在巨大的危害性。简单来说就是恶意攻击者盗用已经认证过的用户信息，以用户信息名义进行一些操作（如发邮件、转账、购买商品等等）。由于身份已经认证过，所以目标网站会认为操作都是真正的用户操作的 。CSRF 并不能拿到用户信息，它只是盗用的用户凭证去进行操作。</li></ul></blockquote><h2 id="websocket-是怎么实现点对点通信和广播通信的？"><a class="header-anchor" href="#websocket-是怎么实现点对点通信和广播通信的？" aria-hidden="true">#</a> WebSocket 是怎么实现点对点通信和广播通信的？</h2><blockquote><p>webSocket 是一种全双工通信协议。websocket 让服务端和客户端通信变得简单。最大的特点是可以通过服务端主动推送消息到客户端。前端基于 nodejs 和 WebSocket 实现点对点及广播通信。</p><ul><li>广播通信顾名思义是类似广播一样给多个人进行广播消息。</li><li>点对点通信顾名思义就是一对一的通信，例如多人实时聊天，可以指定用户来发送消息。点对点通信中需要注意服务端需要记录每个 socket 客户端的连接 ，需要将客户端及服务端 socket 对象关联起来。广播数据的时候，广播指定对象就可以了</li><li>WebSocket 区分广播通信及点对点通信核心在于区分每一个连接的 socket 对象。广播通信需要对于非自身的所有连接的 socket 对象进行通信。而点对点通信，通过关联用户及 socket 对象，且保存每一个 socket 连接，查找指定的 socket 对象，来达到发送指定 socket 连接的目的。</li></ul></blockquote><h2 id="客户端缓存有几种方式-浏览器出现-from-disk、from-memory-的-策略是啥"><a class="header-anchor" href="#客户端缓存有几种方式-浏览器出现-from-disk、from-memory-的-策略是啥" aria-hidden="true">#</a> 客户端缓存有几种方式?浏览器出现 from disk、from memory 的 策略是啥?</h2><p>1.强缓存</p><ul><li>服务器通知浏览器一个缓存时间，在缓存时间内，下次请求，直接用缓存，不在时间内，执行比较缓存策略。</li><li><code>Cache-control</code> （相对值）、 <code>Expries</code>（绝对值）</li><li>Expries 是 http1.0 的标准</li></ul><div class="language-javascript"><pre><code><span class="token keyword">let</span> nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
nowTime<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;Expires&#39;</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>到了<code>HTTP/1.1</code>，<code>Expire</code>已经被<code>Cache-Control</code>替代<code>ctx.set(&quot;Cache-control&quot;,&quot;max-age=3600&quot;) // 设置缓存时间 3600s</code></p><ul><li><p>public：所有内容都将被缓存（客户端和代理服务器都可缓存） - private：所有内容只有客户端可以缓存，<code>Cache-Control</code>的默认取值 - no-cache：客户端缓存内容，但是是否使用缓存则需要经过协商缓存来验证决定 - no-store：所有内容都不会被缓存，即不使用强制缓存，也不使用协商缓存 - max-age=xxx ：缓存内容将在 xxx 秒后失效<code>Cache-Control</code>优先级比<code>Expires</code>高<code>from memory cache</code>代表使用内存中的缓存，<code>from disk cache</code>则代表使用的是硬盘中的缓存，浏览器读取缓存的顺序为<code>memory –&gt; disk</code>。</p></li><li><p>协商缓存让客户端与服务器之间能实现缓存文件是否更新的验证、提升缓存的复用率，将缓存信息中的<code>Etag</code>和<code>Last-Modified</code>通过请求发送给服务器，由服务器校验，返回 304 状态码时，浏览器直接使用缓存。出现<code> from disk</code>、<code>from memory</code> 的策略是强缓存。</p><ul><li>`Last-Modify/if-Modify-Since</li><li>ETag/if-None-Macth`</li><li>协商缓存的标识也是在响应报文的 HTTP 头中和请求结果一起返回给浏览器的，控制协商缓存的字段分别有：<code>Last-Modified / If-Modified-Since</code>和<code>Etag / If-None-Match</code>，其中<code>Etag / If-None-Match</code>的优先级比<code>Last-Modified / If-Modified-Since</code>高。</li><li>缓存关系强缓存优于协商缓存，强缓存中 <code>Cache-control</code> 优于 <code>Expries</code>，协商缓存中<code>ETag/ If-None-Match</code> 优先级高于 <code>Last-Modified / If-Modified-Since</code>。</li></ul></li></ul><h2 id="说一下-cors-的简单请求和复杂请求的区别"><a class="header-anchor" href="#说一下-cors-的简单请求和复杂请求的区别" aria-hidden="true">#</a> 说一下 CORS 的简单请求和复杂请求的区别?</h2><ul><li><code>CORS(Cross-origin resource sharing)</code>，跨域资源共享，是一份浏览器技术的规范，用来避开浏览器的同源策略。相关头部设置如下： <ul><li><code>Access-Control-Allow-Origin</code> 指示请求的资源能共享给哪些域。 <code>Access-Control-Allow-Credentials</code> 指示当请求的凭证标记为 <code>true</code> 时，是否响应该请求。 <code>Access-Control-Allow-Headers</code> 用在对预请求的响应中，指示实际的请求中可以使用哪些 <code>HTTP</code> 头。 <code>Access-Control-Allow-Methods</code> 指定对预请求的响应中，哪些 <code>HTTP</code> 方法允许访问请求的资源。 <code>Access-Control-Expose-Headers</code> 指示哪些 <code>HTTP</code> 头的名称能在响应中列出。 <code>Access-Control-Max-Age</code> 指示预请求的结果能被缓存多久。 <code>Access-Control-Request-Headers</code> 用于发起一个预请求，告知服务器正式请求会使用那些 <code>HTTP</code> 头。 <code>Access-Control-Request-Method</code> 用于发起一个预请求，告知服务器正式请求会使用哪一种 <code>HTTP</code> 请求方法。 <code>Origin</code> 指示获取资源的请求是从什么域发起的。</li><li><code>CORS</code>可以分成两种简单请求和复杂请求。简单请求是满足以下下条件的请求</li><li>HTTP 方法是下列之一 <ul><li>HEAD</li><li>GET</li><li>POST</li></ul></li><li>HTTP 头信息不超出以下几种字段 <ul><li>Accept</li><li>Accept-Language</li><li>Content-Language</li><li>Last-Event-ID</li><li>Content-Type，但仅能是下列之一</li><li>application/x-www-form-urlencoded</li><li>multipart/form-datatext/plain`</li></ul></li><li>反之就是复杂请求，复杂请求表面上看起来和简单请求使用上差不多，但实际上浏览器发送了不止一个请求。其中最先发送的是一种&quot;预请求&quot;，此时作为服务端，也需要返回&quot;预回应&quot;作为响应。预请求实际上是对服务端的一种权限请求，只有当预请求成功返回，实际请求才开始执行。</li></ul></li></ul><h2 id="节流和防抖分别是什么？在什么场景下使用？请分别实现一个节流函数和一个防抖函数"><a class="header-anchor" href="#节流和防抖分别是什么？在什么场景下使用？请分别实现一个节流函数和一个防抖函数" aria-hidden="true">#</a> 节流和防抖分别是什么？在什么场景下使用？请分别实现一个节流函数和一个防抖函数</h2><h2 id="怎么禁止让-js-读取-cookie？怎么让-cookie-只在-https-下传输？"><a class="header-anchor" href="#怎么禁止让-js-读取-cookie？怎么让-cookie-只在-https-下传输？" aria-hidden="true">#</a> 怎么禁止让 js 读取 cookie？怎么让 cookie 只在 HTTPS 下传输？</h2><blockquote><p>由于 cookie 会存放在客户端，一般情况下会保存一些凭证及状态信息，为了防止 cookie 泄露造成安全问题。可以这只 cookie 的 HttpOnly 属性，那么通过程序(JS 脚本、Applet 等)将无法读取到 Cookie 信息，这样能有效的防止 XSS 攻击。cookie 中有个属性 secure，当该属性设置为 true 时，表示创建的 Cookie 会被以安全的形式向服务器传输，也就是只能在 HTTPS 连接中被浏览器传递到服务器端进行会话验证，如果是 HTTP 连接则不会传递该 cookie 信息，所以不会被窃取到 Cookie 的具体内容。就是只允许在加密的情况下将 cookie 加在数据包请求头部，防止 cookie 被带出来。secure 属性是防止信息在传递的过程中被监听捕获后信息泄漏。但是这两个属性并不能解决 cookie 在本机出现的信息泄漏的问题。</p></blockquote><h2 id="v-if-和-v-for-为什么不能连用？"><a class="header-anchor" href="#v-if-和-v-for-为什么不能连用？" aria-hidden="true">#</a> v-if 和 v-for 为什么不能连用？</h2><blockquote><p>v-for 比 v-if 优先，如果每一次都需要遍历整个数组，将会影响速度，尤其是当之需要渲染很小一部分的时候 。可以采取多层包裹来解决性能损耗问题。例如外层给标签绑定指令 v-if 或者是内层标签绑定 v-if</p></blockquote><h2 id="单页面应用和多页面应用区别及优缺点"><a class="header-anchor" href="#单页面应用和多页面应用区别及优缺点" aria-hidden="true">#</a> 单页面应用和多页面应用区别及优缺点?</h2><ul><li>单页应用： <ul><li>优点： <ul><li>用户体验好，快，内容的改变不需要重新加载整个页面，基于这一点 SPA 对服务器压力较小</li><li>前后端分离</li><li>页面切换体验好</li></ul></li><li>缺点： <ul><li>不利于 SEO</li><li>导航不可用，需要自己实现导航</li><li>初次加载好事长</li><li>页面复杂度提高</li></ul></li></ul></li><li>多页应用 <ul><li>优点： <ul><li>对于 SEO 友好</li><li>容易扩展</li><li>更易的数据分析</li></ul></li><li>缺点： <ul><li>程序开发成本高</li><li>增加服务端压力，多页面会不停的加载</li><li>用户体验相对较差</li></ul></li></ul></li></ul><h2 id="v-model-该如何实现？"><a class="header-anchor" href="#v-model-该如何实现？" aria-hidden="true">#</a> v-model  该如何实现？</h2><blockquote><p>v-model 本质上是 v-on 和 v-bind 的语法糖。 v-model 在内部为不同元素抛出不同的事件，如：text 和 textarea 元素使用 value 属性和 input 事件；checkbox 和 radio 使用 checked 属性和 change 事件；select 字段将 value 作为 prop 并将 change 作为事件。</p></blockquote><ul><li>v-model 作用在普通表单上</li></ul><div class="language-javascript"><pre><code><span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;myvalue&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">//  等同于</span>
<span class="token operator">&lt;</span>input v<span class="token operator">-</span>bind<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;myvalue&quot;</span> v<span class="token operator">-</span>on<span class="token operator">:</span>input<span class="token operator">=</span><span class="token string">&quot;myvalue=$event.target.value&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><p>v-model 作用在组件上 父组件 v-model 语法糖本质上可以修改为 <code>&lt;child :value=&quot;message&quot; @input=&quot;function(e){message = e}&quot;&gt;&lt;/child&gt;</code>在组件的实现中，我们是可以通过 v-model 属性 来配置子组件接收的 prop 名称，以及派发的事件名称。例如：</p><div class="language-javascript"><pre><code><span class="token comment">// 父组件</span>
<span class="token comment">//html</span>
<span class="token operator">&lt;</span>mycom v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;myvalue&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">//等同于</span>
<span class="token operator">&lt;</span>mycom
    <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;myvalue&quot;</span>
    @input<span class="token operator">=</span><span class="token string">&quot;(e)=&gt;{myvalue = e}&quot;</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">//js</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span><span class="token punctuation">{</span>
        mycom
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        myvalue<span class="token operator">:</span> <span class="token string">&quot;123&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 子组件</span>
<span class="token keyword">let</span> mycom <span class="token operator">=</span> <span class="token punctuation">{</span>
    props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;&lt;input :value=&quot;value&quot;  @input=&quot;fn&quot; /&gt;&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="vue2-中为什么检测不到数组的变化，如何解决"><a class="header-anchor" href="#vue2-中为什么检测不到数组的变化，如何解决" aria-hidden="true">#</a> vue2 中为什么检测不到数组的变化，如何解决?</h2><p>由于由 JavaScript 的限制，Vue 不能检测数组变动。解决方案是通过全局 Vue.set 或者用实例方法 vm.$set 来修改。同样也可以通过变异方法 splice 来修改数组触发数据响应式</p><h2 id="在-react-项目中，想要进行逻辑复用-有哪些方案？"><a class="header-anchor" href="#在-react-项目中，想要进行逻辑复用-有哪些方案？" aria-hidden="true">#</a> 在 React 项目中，想要进行逻辑复用,有哪些方案？</h2><h3 id="组件逻辑复用、组件视图复用"><a class="header-anchor" href="#组件逻辑复用、组件视图复用" aria-hidden="true">#</a> 组件逻辑复用、组件视图复用</h3><h4 id="逻辑复用：hoc（高阶组件）"><a class="header-anchor" href="#逻辑复用：hoc（高阶组件）" aria-hidden="true">#</a> 逻辑复用：HOC（高阶组件）</h4><blockquote><p>HOC（高阶组件）类似于高阶函数，在使用高阶组件时，传入一个组件，会返回一个组件。 举个我们使用频率比较多的例子 - withRouter</p></blockquote><div class="language-javascript"><pre><code><span class="token keyword">function</span> <span class="token function">Acmp</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> localtion<span class="token punctuation">,</span> match <span class="token punctuation">}</span> <span class="token operator">=</span> props
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>view<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> Bcmp <span class="token operator">=</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Acmp<span class="token punctuation">)</span>
</code></pre></div><p><code>Acmp</code>组件本身不具备路由相关信息；但是<code>Acmp</code>中想要使用路由相关的信息，这是就可以使用<code>withRouter()</code>使<code>Acmp</code>拥有路由信息</p><p><code>withRouter()</code>这个高阶组件的作用就是复用传递给视图组件路由信息的逻辑；调用<code>withRouter()</code>将<code>Acmp</code>组件传递进去，<code>withRouter()</code>返回一个<code>Bcmp</code>；调用<code>Bcmp</code>组件时，会调用<code>Acmp</code>组件，并将路由信息传递给<code>Acmp</code></p><p>原理如下：</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">withRouter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Cmp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Cmp<span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="hooks"><a class="header-anchor" href="#hooks" aria-hidden="true">#</a> hooks</h4><blockquote><p><code>hooks</code>的出现，主要目的就是解决逻辑复用的问题，相比高阶组件，<code>hooks</code> 的使用更加灵活，更自由。以<code>Router</code>的<code>hooks</code>对比<code>withRouter</code>；使用<code>withRouter</code>时，会一次性将路由所有相关数据导入组件，而 <code>hooks</code> 我们按照需求汁倒入<code>location</code>和<code>history</code>等；另外一个组件中，用<code>redux</code>相关数据，有需要路由信息时，结果如下</p></blockquote><div class="language-javascript"><pre><code><span class="token keyword">function</span> <span class="token function">Acmp</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> location<span class="token punctuation">,</span> match <span class="token punctuation">}</span> <span class="token operator">=</span> props
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>view<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> Bcmp <span class="token operator">=</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Acmp<span class="token punctuation">)</span>
<span class="token keyword">const</span> Ccmp <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">)</span><span class="token punctuation">(</span>Bcmp<span class="token punctuation">)</span>
</code></pre></div><p>复用一个逻辑就需要在外面包一层，使用起来极不方便；使用 <code>hooks</code> 就比这方便得多且灵活</p><h4 id="render-props"><a class="header-anchor" href="#render-props" aria-hidden="true">#</a> render props</h4><p>render props 同样是 react 中，复用逻辑的小技巧，并不是标准定义的 API。 简单来说，就是组件具有一个 <code>render</code> 属性，该属性接收的是一个函数，该组件中要渲染的视图是 <code>render</code> 属性的返回值。 举一个我们使用最多的常见，<code>Route</code> 组件的 <code>render</code> 属性。</p><div class="language-javascript"><pre><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p><code>Route</code> 组件中得这个 <code>render</code> 属性就是一个关于 render props 得实际应用；将组件内要渲染得视图放在 <code>render</code> 属性得返回值中，而组件本身是一个路由逻辑得公用。这样就做到了功能复用而视图自定义。</p><p>Route 简易原理如下：</p><div class="language-javascript"><pre><code><span class="token keyword">function</span> <span class="token function">Route</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> path<span class="token punctuation">,</span> render <span class="token punctuation">}</span> <span class="token operator">=</span> props
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">matchPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>RouterContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token parameter">context</span> <span class="token operator">=&gt;</span> <span class="token function">render</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ROuterContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>高阶组件或 hook，通常用在单一的逻辑复用，比如实时获取当前滚动条位置，或定义 <code>state</code>，副作用处理等，都是单一的逻辑。 而 render props 通常是一个完整的功能复用，只是该功能中视图或部分视图需要由使用者定义，比如，弹窗功能，路由功能 等，项目中使用到这些功能的地方有很多，但是使用时，视图可能有差异</p></blockquote><h2 id="在-react-中，针对类组件-和-函数组件，分别怎么去进行性能优化？"><a class="header-anchor" href="#在-react-中，针对类组件-和-函数组件，分别怎么去进行性能优化？" aria-hidden="true">#</a> 在 React 中，针对类组件 和 函数组件，分别怎么去进行性能优化？</h2><p>React 中，如果组件更新了，会携带它的子孙级组件一起进行更新，虽然组件更新时，会有 diff 约束 DOM 更新。 但组件更新时的 diff，也会消耗很多性能。 如何避免项目中不必要的组件更新就是我们必须要面对的问题。 如果是类组件我们可以使用 <code>shouldComponentUpdate</code> 或者<code>PureComponent</code> , 函数组件则可以使用 hooks <code>useMemo()</code></p><div class="tip custom-block"><p class="custom-block-title">注意</p><p>不管你使用的是哪种优化手段，<code>state</code> 一定是一个不可变值，否则拿不到组件更新前的数据， 也就没有办法进行对比，优化也就无从谈起。<br> 官网手册：<a href="https://reactjs.org/docs/react-api.html#reactmemo" target="_blank" rel="noopener noreferrer">React.memo</a>、<a href="https://reactjs.org/docs/react-api.html#reactpurecomponent" target="_blank" rel="noopener noreferrer">React.PureComponent</a></p></div></div></div><footer class="page-footer" data-v-d36a7fda data-v-5a019cc9><div class="edit" data-v-5a019cc9><div class="edit-link" data-v-5a019cc9 data-v-3ae295f1><!----></div></div><div class="updated" data-v-5a019cc9><p class="last-updated" data-v-5a019cc9 data-v-52854a16><span class="prefix" data-v-52854a16>更新时间:</span><span class="datetime" data-v-52854a16></span></p></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"7bde5895\",\"go_index.md\":\"189fd393\",\"interview_index.md\":\"ccbfce6f\",\"project_index.md\":\"f9821236\",\"database_mongodb_index.md\":\"1fb2ad1a\",\"database_mysql_index.md\":\"460de8d1\",\"database_redis_index.md\":\"770d0f8d\",\"front-end_babel_index.md\":\"b5e0d29d\",\"front-end_js_base.md\":\"25eb4886\",\"front-end_js_index.md\":\"883946c2\",\"front-end_node_index.md\":\"3fd9e7b3\",\"front-end_react_index.md\":\"e3bc6513\",\"front-end_vue_index.md\":\"fc41acf5\",\"front-end_webpack_index.md\":\"1bfd4ea2\",\"front-end_wechat_index.md\":\"ad98a95e\"}")</script>
    <script type="module" async src="/assets/app.e8bd60e9.js"></script>
  </body>
</html>