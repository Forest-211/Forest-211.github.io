<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数 | Forest</title>
    <meta name="description" content="笔记记录、阅读">
    <link rel="stylesheet" href="/docs/assets/style.abb680c9.css">
    <link rel="modulepreload" href="/docs/assets/Home.fbf65f2b.js">
    <link rel="modulepreload" href="/docs/assets/app.1507091b.js">
    <link rel="modulepreload" href="/docs/assets/front-end_typescript_04-函数.md.ff5ab636.lean.js">
    <link rel="modulepreload" href="/docs/assets/app.1507091b.js">
    <meta name="twitter:title" content="函数 | Forest">
    <meta property="og:title" content="函数 | Forest">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-7161a24b><div class="sidebar-button" data-v-7161a24b><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/docs/" aria-label="Forest, back to home" data-v-7161a24b data-v-4a583abe><!----> Forest</a><div class="flex-grow" data-v-7161a24b></div><div class="nav" data-v-7161a24b><nav class="nav-links" data-v-7161a24b data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/docs/" data-v-641633f9>首页 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>前端</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/js/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>javascript</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/vue/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>vue</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/react/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>react</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/typescript/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Ts</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/node/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>node</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/nest/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>nest</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/react-native/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>react-native</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/docs/go/" data-v-641633f9>Go <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>工具</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/utils/git/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Git</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/utils/docker/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Docker</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/docs/other/" data-v-641633f9>其他 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/Forest-211" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-6b49cdcd><nav class="nav-links nav" data-v-6b49cdcd data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/docs/" data-v-641633f9>首页 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>前端</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/js/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>javascript</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/vue/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>vue</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/react/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>react</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/typescript/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Ts</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/node/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>node</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/nest/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>nest</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/front-end/react-native/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>react-native</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/docs/go/" data-v-641633f9>Go <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>工具</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/utils/git/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Git</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/docs/utils/docker/" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Docker</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/docs/other/" data-v-641633f9>其他 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/Forest-211" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-6b49cdcd><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/front-end/typescript/">TypeScript</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/front-end/typescript/01-环境准备">环境准备</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/front-end/typescript/02-为什么要学习TypeScript">为什么要学习TS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/front-end/typescript/03-类型全解">类型全解</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/docs/front-end/typescript/04-函数">函数</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#函数声明和调用">函数声明和调用</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#声明函数的五种方式：">声明函数的五种方式：</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#可选参数和默认参数">可选参数和默认参数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#剩余参数">剩余参数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#call、bind、apply">call、bind、apply</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#注解this的类型">注解this的类型</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#生成器函数">生成器函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#迭代器">迭代器</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#调用签名">调用签名</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#上下文类型推导">上下文类型推导</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#函数重载">函数重载</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="函数"><a class="header-anchor" href="#函数" aria-hidden="true">#</a> 函数</h1><p>在TypeScript中 声明和调用函数的不同方式有：</p><ul><li>签名重载</li><li>多态函数</li><li>多态类型</li></ul><h2 id="函数声明和调用"><a class="header-anchor" href="#函数声明和调用" aria-hidden="true">#</a> 函数声明和调用</h2><p>在JavaScript中函数一等公民，也就是我们可以像使用对象那样使用函数：可以赋值给变量、可以作为参数传给其他函数、也可以作为函数的返回值、可以赋值给对象和原型、可以赋予属性、可以读取属性等等</p><p>在TypeScript中，通常声明函数时，如果有形参，都会显示注解参数的类型；如下。TypeScript能推导出函数体中的类型，但是大多数时候无法推导出参数的类型。返回类型能推导出来，不过也可以显示注解</p><div class="language-typescript"><pre><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre></div><h3 id="声明函数的五种方式："><a class="header-anchor" href="#声明函数的五种方式：" aria-hidden="true">#</a> 声明函数的五种方式：</h3><ul><li><p>具名函数</p><div class="language-typescript"><pre><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> name <span class="token operator">+</span> <span class="token string">&quot;hi~&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>函数表达式</p><div class="language-typescript"><pre><code><span class="token keyword">let</span> <span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> name <span class="token operator">+</span> <span class="token string">&quot;hi~&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>箭头函数</p><div class="language-typescript"><pre><code><span class="token keyword">let</span> <span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  name <span class="token operator">+</span> <span class="token string">&quot;hi~&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>箭头函数表达式简写形式</p><div class="language-typescript"><pre><code><span class="token keyword">let</span> <span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name <span class="token operator">+</span> <span class="token string">&quot;hi~&quot;</span>
</code></pre></div></li><li><p>函数构造方法</p><div class="language-typescript"><pre><code><span class="token keyword">let</span> sayHi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Function</span></span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;return name + &quot;hi~&quot;&#39;</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>通常情况下形参的类型需要注解，返回参数的类型不要求必须注解</p></div><h3 id="可选参数和默认参数"><a class="header-anchor" href="#可选参数和默认参数" aria-hidden="true">#</a> 可选参数和默认参数</h3><p>与对象和元组类型一样，可以使用<code>?</code>把参数标记为可选；声明函数的参数的时候，<strong>可选参数必须要在必传参数的后面</strong>；如下：</p><div class="language-typescript"><pre><code><span class="token keyword">function</span> <span class="token function">handleLog</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> nickname<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> message<span class="token punctuation">,</span> nickname <span class="token operator">??</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">handleLog</span><span class="token punctuation">(</span><span class="token string">&#39;今天天气不错～～&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 上午7:09:59 今天天气不错～～</span>
<span class="token function">handleLog</span><span class="token punctuation">(</span><span class="token string">&#39;今天天气不错～～&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Forest&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 上午7:09:59 今天天气不错～～ Forest</span>
</code></pre></div><p>与在JavaScript中一眼给，可以为可选参数提供默认值；这样做在语义上与把参数标记为可选的一样，即在调用无需传入参数的值</p><blockquote><p>默认值的参数不要求放在参数列表的结尾，而可选参数必须放在末尾</p></blockquote><p>将上面示例的可选参数改为默认参数，也就是当这个参数传值了就用传的值，如果没有，则使用默认值。这个默认参数可以不声明类型，因为TypeScript可以根据值推导出对应的类型，从而保证代码简洁、易于理解</p><div class="language-typescript"><pre><code><span class="token keyword">function</span> <span class="token function">handleLog</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> nickname <span class="token operator">=</span> <span class="token string">&#39;Forest&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> message<span class="token punctuation">,</span> nickname<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">handleLog</span><span class="token punctuation">(</span><span class="token string">&#39;今天天气不错～～&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 上午7:13:27 今天天气不错～～ Forest</span>
<span class="token function">handleLog</span><span class="token punctuation">(</span><span class="token string">&#39;今天天气不错～～&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;clin&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 上午7:13:27 今天天气不错～～ clin</span>
</code></pre></div><p>当然，如果愿意，也可以显示注解默认参数的类型，就像默认值的参数一样：</p><div class="language-typescript"><pre><code><span class="token keyword">type</span> <span class="token class-name">Content</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
    nickname<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">handleLog</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> content<span class="token operator">:</span> Content <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> message<span class="token punctuation">,</span> content<span class="token operator">?.</span>nickname<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="剩余参数"><a class="header-anchor" href="#剩余参数" aria-hidden="true">#</a> 剩余参数</h3><p>如果一个函数接受一组参数时，可以使用数组或者元组传入：</p><div class="language-typescript"><pre><code><span class="token keyword">function</span> <span class="token function">handleSum</span><span class="token punctuation">(</span>numbers<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> numbers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>total<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> total <span class="token operator">+</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">handleSum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 88</span>
</code></pre></div><p>不过，有时我们需要的是可变参数函数，即参数的数量不定；此时就可以用到<code>arguments</code>了，<code>arguments</code>是个类似数组的对象，在调用内置的<code>.reduce()</code>之前要把它转为数组</p><div class="language-typescript"><pre><code><span class="token keyword">function</span> <span class="token function">handleSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">return</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>total<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> total <span class="token operator">+</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="call、bind、apply"><a class="header-anchor" href="#call、bind、apply" aria-hidden="true">#</a> call、bind、apply</h3><p>调用函数，除了使用圆括号<code>()</code>外，JavaScript至少还支持两种其他方式</p><div class="language-typescript"><pre><code><span class="token keyword">function</span> <span class="token function">handleAdd</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token function">handleAdd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token function">handleAdd</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment">// 3</span>
<span class="token function">handleAdd</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>      <span class="token comment">// 3</span>
<span class="token function">handleAdd</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// 3</span>
</code></pre></div><p><code>apply()</code>为函数内部的<code>this</code>绑定一个值，然后展开第二个参数，作为参数传给要调用的函数</p><p><code>call()</code>的用法类似，不过是按顺序应用参数的，而不是展开</p><p><code>bind()</code>差不多，也为函数的<code>this</code>和参数绑定值；不过<code>bind()</code>并不是调用函数，而是返回一个新的函数，所以使用<code>bind()</code>还得自己手动调用</p><h3 id="注解this的类型"><a class="header-anchor" href="#注解this的类型" aria-hidden="true">#</a> 注解this的类型</h3><p>JavaScript中的每个函数都有this变量，而不局限于类的方法；以不同的调用函数，<code>this</code>的值也不同，这极易导致代码脆弱、难以理解</p><div class="language-js"><pre><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

x<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// this的值为x对象</span>
</code></pre></div><p>假设有个格式日期的使用函数，如下：</p><div class="language-go"><pre><code>function <span class="token function">formatDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">`${new Date().getFullYear()}-${new Date().getMonth() + 1}-${new Date().getDay()}`</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2021-8-5</span>
</code></pre></div><p><code>this</code>的值取决于调用函数的方式，而不受声明方式的干扰；如果在函数使用<code>this</code>请在函数的第一个参数中声明<code>this</code>的类型，这样每次调用函数时，TypeScript将确保<code>this</code>的确是你预期的类型；<code>this</code>不常规的参数，而是保留字，是函数签名的一部分。</p><h3 id="生成器函数"><a class="header-anchor" href="#生成器函数" aria-hidden="true">#</a> 生成器函数</h3><p>生成器函数是生成一系列值的便利方式；生成器的使用可以精确生成生成值；生成器是惰性的，只在使用方要求时才计算下一个值。</p><div class="language-js"><pre><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">createFibonacciGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">yield</span> a<span class="token punctuation">;</span>
        <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span> a<span class="token operator">+</span>b<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fibonacciGenerator <span class="token operator">=</span> <span class="token function">createFibonacciGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fibonacciGenerator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 0, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fibonacciGenerator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fibonacciGenerator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fibonacciGenerator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 2, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fibonacciGenerator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 3, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fibonacciGenerator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 5, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fibonacciGenerator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 8, done: false }</span>
</code></pre></div><ul><li>函数名称前面的星号(*)表明这是一个生成器函数。调用生成器返回一个可迭代的迭代器</li><li>这个生成器可一直生成值</li><li>生成器使用<code>yield</code>关键字产出值。使用方让生成器提供下一个值，<code>yield</code>把结果发给使用方，然后停止执行，直到使用方要求提供下一个值为止；这里的<code>while(true)</code>循环不会一直运行下去，程序不会崩溃</li><li>为了计算下一个斐波那契数列，然后把<code>b</code>赋值给<code>a</code>、把<code>a + b</code>赋值给<code>b</code></li></ul><p>调用<code>createFibonacciGenerator</code>得到的是一个<code>IterableIterator</code>。每次调用<code>next()</code>，迭代器计算下一个斐波那契数，然后通过<code>yield</code>产出</p><h3 id="迭代器"><a class="header-anchor" href="#迭代器" aria-hidden="true">#</a> 迭代器</h3><p>迭代器是生成器的向对面：生成器是生成一系列值的方式，而迭代器是使用这些值的方式</p><p>可迭代对象：有<code>Symbol.iterrator</code>属性的对象，而且该属性的值为一个函数，返回一个迭代器</p><p>迭代器：定义有<code>next</code>方法的对象，该方法返回一个具有<code>value</code>和<code>done</code>属性的对象</p><p><strong>自定义迭代器或者可迭代对象</strong></p><div class="language-js"><pre><code><span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">yield</span> i
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>numbers</code>是一个迭代器，调用生成器函数<code>numbers[Symbol.iterator]()</code>返回一个可迭代的迭代器</p><p>除了我们自己定义迭代器外，还可以使用JavaScript内置的常用集合类型（Array、Map、Set、String）</p><h3 id="调用签名"><a class="header-anchor" href="#调用签名" aria-hidden="true">#</a> 调用签名</h3><p>多数时候Function类型并不是我们想要的最终结果；Object能描述所有对象，类似地，Functoin也可以表示所有函数，但是并不是能体现函数的具体类型</p><div class="language-typescript"><pre><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre></div><p><code>(a: number, b: number) =&gt; number</code>是TypeScript表示函数类型的句法，也称调用签名。如果把函数作为参数传给另一个函数，或者作为函数的返回值，就是使用这样的句法注解</p><blockquote><p><code>a</code>和<code>b</code>这两个参数名称只是一种表意手段，不影响类型函数的可赋值性</p></blockquote><p>函数的调用签名只包含类型层面的代码，即只有类型，没有值。因此函数的调用签名可以表示参数的类型、this的类型、返回值的类型、剩余参数的类型和可选参数的类型，但是无法推导默认值（因为默认值是值，不是类型）。调用签名没有函数的定义体，无法推导出返回类型，所以必须显示注解</p><div class="language-typescript"><pre><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">(</span>nickname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> email<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> user<span class="token operator">:</span> <span class="token function-variable function">User</span> <span class="token operator">=</span> <span class="token punctuation">(</span>nickname<span class="token punctuation">,</span> email<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nickname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">的邮箱：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">user</span><span class="token punctuation">(</span><span class="token string">&#39;Forest&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;767425412@qq.com&#39;</span><span class="token punctuation">)</span> <span class="token comment">// Forest的邮箱：767425412@qq.com</span>
</code></pre></div><p>首先声明了一个函数表达式<code>user</code>，其类型为<code>User</code>；因为定义<code>User</code>时，已经注解了成员变量的类型，所以<code>user</code>中的形参就不用再次注解类型了，TypeScript能从<code>User</code>中推导出来</p><h3 id="上下文类型推导"><a class="header-anchor" href="#上下文类型推导" aria-hidden="true">#</a> 上下文类型推导</h3><p>在上面的函数表达式<code>user</code>中把类型声明为<code>User</code>，所以TypeScript能从上下文中推导出<code>nickname</code>和<code>email</code>的类型，这个行为就被称为上下文类型推导，这也是TypeScript类型推导的一大特性</p><div class="language-typescript"><pre><code><span class="token keyword">function</span> <span class="token function">times</span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span> n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">f</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">times</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
</code></pre></div><p>以上代码会依次打印0、1、2、3、4、5；TypeScript能从上下文中推导出<code>n</code>是个数字，因为在<code>times</code>的签名中，我们声明<code>f</code>的参数<code>index</code>是一个数字</p><h3 id="函数重载"><a class="header-anchor" href="#函数重载" aria-hidden="true">#</a> 函数重载</h3><p>函数重载就是有多个调用签名的函数</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/docs/front-end/typescript/03-类型全解" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>类型全解</span></a></div><div class="next" data-v-38ede35f><!----></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"aeb6424f\",\"go_00-起步.md\":\"61399db4\",\"go_01-基础.md\":\"4280c072\",\"go_02-数组与切片.md\":\"1ebe2819\",\"go_03-流程控制与循环.md\":\"1c169581\",\"go_04-map.md\":\"4c1e2f7d\",\"go_05-函数.md\":\"2b4a7c5c\",\"go_06-结构体与方法.md\":\"20282018\",\"go_07-接口.md\":\"a1baea04\",\"go_08-协程与通道.md\":\"1406a44a\",\"go_09-并发资源.md\":\"c9f83ef1\",\"go_10-测试.md\":\"a593ac48\",\"go_11-反射.md\":\"79690447\",\"go_12-web开发基础.md\":\"349c6e96\",\"go_index.md\":\"7a42c400\",\"interview_index.md\":\"2926cca0\",\"other_01.md\":\"123b4419\",\"other_index.md\":\"74e7e1a9\",\"project_index.md\":\"11468e46\",\"database_mongodb_01-mongodb.md\":\"48ff538b\",\"database_mongodb_index.md\":\"df8512cb\",\"database_mysql_index.md\":\"e60d1895\",\"database_redis_index.md\":\"afacca5b\",\"front-end_js_base.md\":\"99db0420\",\"front-end_js_index.md\":\"dc8fac2c\",\"front-end_nest_01.md\":\"fa779e92\",\"front-end_nest_index.md\":\"d00e6fdc\",\"front-end_node_1-webpack5-node.md\":\"dda06b36\",\"front-end_node_index.md\":\"6b4d5c6c\",\"front-end_react_index.md\":\"b37ad54b\",\"front-end_typescript_01-环境准备.md\":\"d7090e38\",\"front-end_typescript_02-为什么要学习typescript.md\":\"5c2f9ce7\",\"front-end_typescript_03-类型全解.md\":\"593b9be6\",\"front-end_typescript_04-函数.md\":\"ff5ab636\",\"front-end_typescript_index.md\":\"0b2d91ae\",\"front-end_react-native_01.md\":\"53495926\",\"front-end_react-native_02.md\":\"3727f679\",\"front-end_react-native_03.md\":\"c76ad899\",\"front-end_react-native_04.md\":\"98475964\",\"front-end_react-native_05.md\":\"f3100888\",\"front-end_react-native_index.md\":\"3f70701a\",\"front-end_vue_index.md\":\"774ee7fc\",\"front-end_wechat_index.md\":\"c66c59b7\",\"utils_docker_01-docker.md\":\"e4186eab\",\"utils_docker_02-docker-compose.md\":\"19d4dd4b\",\"utils_docker_03-dockerfile.md\":\"a3dde979\",\"utils_docker_04-ci.md\":\"f7407f29\",\"utils_docker_index.md\":\"239bc156\",\"utils_git_01.md\":\"920eb9f0\",\"utils_git_02.md\":\"59744126\",\"utils_git_03.md\":\"7a4a1d7c\",\"utils_git_index.md\":\"7ac93fe8\"}")</script>
    <script type="module" async src="/docs/assets/app.1507091b.js"></script>
  </body>
</html>