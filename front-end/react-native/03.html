<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      开发必备 | Forest
    </title>
    <meta name="description" content="笔记记录、阅读">
    <link rel="stylesheet" href="/assets/style.3d4e16a3.css">
    <link rel="modulepreload" href="/assets/Home.d8f02edf.js">
    <link rel="modulepreload" href="/assets/app.f8fb6d57.js">
    <link rel="modulepreload" href="/assets/front-end_react-native_03.md.1f0db0b8.lean.js">
    <link rel="modulepreload" href="/assets/app.f8fb6d57.js">
    
    
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-5df6160f><div class="sidebar-button" data-v-5df6160f><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Forest, back to home" data-v-5df6160f data-v-8dbfef3c><!----> Forest</a><div class="flex-grow" data-v-5df6160f></div><div class="nav" data-v-5df6160f><nav class="nav-links" data-v-5df6160f data-v-38e3b123><!--[--><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/" data-v-45eb32c6>首页 <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-dropdown-link" data-v-38e3b123 data-v-6bbf01f6><button class="button" data-v-6bbf01f6><span class="button-text" data-v-6bbf01f6>基础</span><span class="right button-arrow" data-v-6bbf01f6></span></button><ul class="dialog" data-v-6bbf01f6><!--[--><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/js/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>javascript</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/vue/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>vue</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/react/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>react</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/babel/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>babel</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/webpack/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>webpack</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/wechat/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>微信小程序</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/node/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>node</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/nest/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>nest</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item active" href="/front-end/react-native/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>react-native</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-38e3b123><div class="nav-dropdown-link" data-v-38e3b123 data-v-6bbf01f6><button class="button" data-v-6bbf01f6><span class="button-text" data-v-6bbf01f6>数据库</span><span class="right button-arrow" data-v-6bbf01f6></span></button><ul class="dialog" data-v-6bbf01f6><!--[--><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/mongoDB/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>mongoDB</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/redis/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>redis</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/mysql/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>mysql</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/project/" data-v-45eb32c6>项目 <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/go/" data-v-45eb32c6>Go <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/interview/" data-v-45eb32c6>面试 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-58e261f2><nav class="nav-links nav" data-v-58e261f2 data-v-38e3b123><!--[--><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/" data-v-45eb32c6>首页 <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-dropdown-link" data-v-38e3b123 data-v-6bbf01f6><button class="button" data-v-6bbf01f6><span class="button-text" data-v-6bbf01f6>基础</span><span class="right button-arrow" data-v-6bbf01f6></span></button><ul class="dialog" data-v-6bbf01f6><!--[--><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/js/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>javascript</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/vue/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>vue</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/react/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>react</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/babel/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>babel</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/webpack/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>webpack</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/wechat/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>微信小程序</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/node/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>node</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/front-end/nest/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>nest</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item active" href="/front-end/react-native/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>react-native</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-38e3b123><div class="nav-dropdown-link" data-v-38e3b123 data-v-6bbf01f6><button class="button" data-v-6bbf01f6><span class="button-text" data-v-6bbf01f6>数据库</span><span class="right button-arrow" data-v-6bbf01f6></span></button><ul class="dialog" data-v-6bbf01f6><!--[--><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/mongoDB/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>mongoDB</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/redis/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>redis</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><li class="dialog-item" data-v-6bbf01f6><div class="nav-dropdown-link-item" data-v-6bbf01f6 data-v-d552fd76><a class="item" href="/database/mysql/" data-v-d552fd76><span class="arrow" data-v-d552fd76></span><span class="text" data-v-d552fd76>mysql</span><span class="icon" data-v-d552fd76><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/project/" data-v-45eb32c6>项目 <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/go/" data-v-45eb32c6>Go <!----></a></div></div><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item" href="/interview/" data-v-45eb32c6>面试 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-58e261f2><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/front-end/react-native/">React Native</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/front-end/react-native/01">环境搭建</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/front-end/react-native/02">基本认识</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/front-end/react-native/03">开发必备</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#触摸事件">触摸事件</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#onpress">onPress</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#touchable-系列组件">Touchable 系列组件</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#定时器">定时器</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#api">API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#interactionmanager">InteractionManager</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#手势响应系统">手势响应系统</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#touchablehighlight-与-touchable-系列组件">TouchableHighlight 与 Touchable 系列组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#响应者的生命周期">响应者的生命周期</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#捕获-shouldset-事件处理">捕获 ShouldSet 事件处理</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#网络连接">网络连接</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#fetch">Fetch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#axios">Axios</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#websocket">WebSocket</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/front-end/react-native/04">导航系统</a><!----></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-d36a7fda><div class="container" data-v-d36a7fda><!--[--><!--]--><div class="content" data-v-d36a7fda><div data-v-d36a7fda><h1 id="开发必备"><a class="header-anchor" href="#开发必备" aria-hidden="true">#</a> 开发必备</h1><h2 id="触摸事件"><a class="header-anchor" href="#触摸事件" aria-hidden="true">#</a> 触摸事件</h2><blockquote><p>移动应用上的用户交互基本靠“摸”。当然，“摸”也是有各种姿势的：在一个按钮上点击，在一个列表上滑动，或是在一个地图上缩放。</p></blockquote><h3 id="onpress"><a class="header-anchor" href="#onpress" aria-hidden="true">#</a> onPress</h3><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Alert <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span>

<span class="token comment">//...</span>
<span class="token operator">&lt;</span>Button onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>Alert<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;受不了了～&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>click me<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
</code></pre></div><p>效果图：</p><p><img src="/assets/onPress-removebg-preview.a4d9e9b5.png" alt="image-20210609180304108"></p><blockquote><p>点击 click me 就弹出弹框，按钮还可以添加<code>color</code>属性来修改按钮的颜色</p></blockquote><h3 id="touchable-系列组件"><a class="header-anchor" href="#touchable-系列组件" aria-hidden="true">#</a> Touchable 系列组件</h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>这个组件的样式是固定的。如果要自定义就需要配合<code>TouchableOpacity</code>和<code>TouchableNativeFeedback</code>来定制。</p><p>使用场景：</p><ul><li>可以使用<code>TouchableHighlight</code>来制作按钮或者链接。注意此组件的背景会在用户手指按下时变暗。</li><li>在 Android 上还可以使用<code>TouchableNativeFeedback</code>，它会在用户手指按下时形成类似墨水涟漪的视觉效果。</li><li><code>TouchableOpacity</code>会在用户手指按下时降低按钮的透明度，而不会改变背景的颜色。</li><li>如果你想在处理点击事件的同时不显示任何视觉反馈，则需要使用<code>TouchableWithoutFeedback*</code>。</li></ul></div><div class="language-js"><pre><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    Button<span class="token punctuation">,</span>
    Alert<span class="token punctuation">,</span>
    Platform<span class="token punctuation">,</span>
    StyleSheet<span class="token punctuation">,</span>
    Text<span class="token punctuation">,</span>
    TouchableHighlight<span class="token punctuation">,</span>
    TouchableOpacity<span class="token punctuation">,</span>
    TouchableNativeFeedback<span class="token punctuation">,</span>
    TouchableWithoutFeedback<span class="token punctuation">,</span>
    View
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-native&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Touchables</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">_onPressButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Alert<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;You tapped the button!&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">_onLongPressButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Alert<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;You long-pressed the button!&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Button
                    onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        Alert<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;受不了了～&#39;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">}</span>
                    title<span class="token operator">=</span><span class="token string">&quot;click me！&quot;</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>TouchableHighlight
                    onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>_onPressButton<span class="token punctuation">}</span>
                    underlayColor<span class="token operator">=</span><span class="token string">&quot;white&quot;</span>
                <span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>button<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>buttonText<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                            TouchableHighlight
                        <span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>TouchableHighlight<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>TouchableOpacity onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>_onPressButton<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>button<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>buttonText<span class="token punctuation">}</span><span class="token operator">&gt;</span>TouchableOpacity<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>TouchableOpacity<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>TouchableNativeFeedback
                    onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>_onPressButton<span class="token punctuation">}</span>
                    background<span class="token operator">=</span><span class="token punctuation">{</span>
                        Platform<span class="token punctuation">.</span><span class="token constant">OS</span> <span class="token operator">===</span> <span class="token string">&#39;android&#39;</span>
                            <span class="token operator">?</span> TouchableNativeFeedback<span class="token punctuation">.</span><span class="token function">SelectableBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
                    <span class="token punctuation">}</span>
                <span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>button<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>buttonText<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                            TouchableNativeFeedback
                        <span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>TouchableNativeFeedback<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>TouchableWithoutFeedback onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>_onPressButton<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>button<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>buttonText<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                            TouchableWithoutFeedback
                        <span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>TouchableWithoutFeedback<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>TouchableHighlight
                    onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>_onPressButton<span class="token punctuation">}</span>
                    onLongPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>_onLongPressButton<span class="token punctuation">}</span>
                    underlayColor<span class="token operator">=</span><span class="token string">&quot;white&quot;</span>
                <span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>button<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>buttonText<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                            Touchable <span class="token keyword">with</span> Long Press
                        <span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>TouchableHighlight<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token operator">:</span> <span class="token punctuation">{</span>
        paddingTop<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        alignItems<span class="token operator">:</span> <span class="token string">&#39;center&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    button<span class="token operator">:</span> <span class="token punctuation">{</span>
        marginBottom<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
        width<span class="token operator">:</span> <span class="token number">260</span><span class="token punctuation">,</span>
        alignItems<span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
        backgroundColor<span class="token operator">:</span> <span class="token string">&#39;#2196F3&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    buttonText<span class="token operator">:</span> <span class="token punctuation">{</span>
        textAlign<span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
        padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        color<span class="token operator">:</span> <span class="token string">&#39;white&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>效果图：</p><p><img src="/assets/image-20210609-181726.fb257785.png" alt="image-20210609182150852"></p><h2 id="定时器"><a class="header-anchor" href="#定时器" aria-hidden="true">#</a> 定时器</h2><blockquote><p>定时器是一个应用中非常重要的部分。React Native 实现了和浏览器一致的定时器。</p></blockquote><h3 id="api"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h3><ul><li>setTimeout, clearTimeout</li><li>setInterval, clearInterval</li><li>setImmediate, clearImmediate</li><li>requestAnimationFrame, cancelAnimationFrame</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>requestAnimationFrame(fn)</code>和<code>setTimeout(fn, 0)</code>不同，前者会在每帧刷新之后执行一次，而后者则会尽可能快的执行（在 iPhone5S 上有可能每秒 1000 次以上）。</p><p><code>setImmediate</code>则会在当前 JavaScript 执行块结束的时候执行，就在将要发送批量响应数据到原生之前。注意如果你在<code>setImmediate</code>的回调函数中又执行了<code>setImmediate</code>，它会紧接着立刻执行，而不会在调用之前等待原生代码。</p><p><code>Promise</code>的实现就使用了<code>setImmediate</code>来执行异步调用。</p></div><h3 id="interactionmanager"><a class="header-anchor" href="#interactionmanager" aria-hidden="true">#</a> InteractionManager</h3><blockquote><p>可以将一些耗时较长的工作安排到所有互动或动画完成之后再进行。这样可以保证<code>JavaScript </code>动画的流畅运行。</p></blockquote><p>与定时器方法对比：</p><ul><li><code>requestAnimationFrame()</code>: 用来执行在一段时间内控制视图动画的代码</li><li><code>setImmediate/setTimeout/setInterval()</code>: 在稍后执行代码。注意这有可能会延迟当前正在进行的动画。</li><li><code>runAfterInteractions()</code>: 在稍后执行代码，不会延迟当前进行的动画。</li></ul><p>触摸处理系统会把一个或多个进行中的触摸操作认定为&#39;交互&#39;，并且会将<code>runAfterInteractions()</code>的回调函数延迟执行，直到所有的触摸操作都结束或取消了。</p><p><code>InteractionManager</code> 还允许应用注册动画，在动画开始时创建一个交互“句柄”，然后在结束的时候清除它。</p><div class="language-js"><pre><code><span class="token keyword">const</span> handle <span class="token operator">=</span> InteractionManager<span class="token punctuation">.</span><span class="token function">createInteractionHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 执行动画... (`runAfterInteractions`中的任务现在开始排队等候)</span>
<span class="token comment">// 在动画完成之后</span>
InteractionManager<span class="token punctuation">.</span><span class="token function">clearInteractionHandle</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span>
<span class="token comment">// 在所有句柄都清除之后，现在开始依序执行队列中的任务</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">注意</p><p>在组件卸载之后清除定时器可以规避一些致命性的错误；比如：闪退、长时间无响应。</p></div><h2 id="手势响应系统"><a class="header-anchor" href="#手势响应系统" aria-hidden="true">#</a> 手势响应系统</h2><h3 id="touchablehighlight-与-touchable-系列组件"><a class="header-anchor" href="#touchablehighlight-与-touchable-系列组件" aria-hidden="true">#</a> TouchableHighlight 与 Touchable 系列组件</h3><p>响应系统用起来可能比较复杂。所以我们提供了一个抽象的<code>Touchable</code>实现，用来做“可触控”的组件。这一实现利用了响应系统，使得你可以简单地以声明的方式来配置触控处理。如果要做一个按钮或者网页链接，那么使用<code>TouchableHighlight</code>就可以。</p><h3 id="响应者的生命周期"><a class="header-anchor" href="#响应者的生命周期" aria-hidden="true">#</a> 响应者的生命周期</h3><p>一个 View 只要实现了正确的协商方法，就可以成为触摸事件的响应者。我们通过两个方法去“询问”一个 View 是否愿意成为响应者：</p><ul><li><code>View.props.onStartShouldSetResponder: (evt) =&gt; true,</code> - 在用户开始触摸的时候（手指刚刚接触屏幕的瞬间），是否愿意成为响应者？</li><li><code>View.props.onMoveShouldSetResponder: (evt) =&gt; true,</code> - 如果 View 不是响应者，那么在每一个触摸点开始移动（没有停下也没有离开屏幕）时再询问一次：是否愿意响应触摸交互呢？</li></ul><p>如果 View 返回 true，并开始尝试成为响应者，那么会触发下列事件之一:</p><ul><li><code>View.props.onResponderGrant: (evt) =&gt; {}</code> - View 现在要开始响应触摸事件了。这也是需要做高亮的时候，使用户知道他到底点到了哪里。</li><li><code>View.props.onResponderReject: (evt) =&gt; {}</code> - 响应者现在“另有其人”而且暂时不会“放权”，请另作安排。</li></ul><p>如果 View 已经开始响应触摸事件了，那么下列这些处理函数会被一一调用：</p><ul><li><code>View.props.onResponderMove: (evt) =&gt; {}</code> - 用户正在屏幕上移动手指时（没有停下也没有离开屏幕）。</li><li><code>View.props.onResponderRelease: (evt) =&gt; {}</code> - 触摸操作结束时触发，比如&quot;touchUp&quot;（手指抬起离开屏幕）。</li><li><code>View.props.onResponderTerminationRequest: (evt) =&gt; true</code> - 有其他组件请求接替响应者，当前的 View 是否“放权”？返回 true 的话则释放响应者权力。</li><li><code>View.props.onResponderTerminate: (evt) =&gt; {}</code> - 响应者权力已经交出。这可能是由于其他 View 通过<code>onResponderTerminationRequest</code>请求的，也可能是由操作系统强制夺权（比如 iOS 上的控制中心或是通知中心）。</li></ul><p><code>evt</code>是一个合成事件，它包含以下结构：</p><ul><li><code>nativeEvent</code><ul><li><code>changedTouches</code> - 在上一次事件之后，所有发生变化的触摸事件的数组集合（即上一次事件后，所有移动过的触摸点）</li><li><code>identifier</code> - 触摸点的 ID</li><li><code>locationX</code> - 触摸点相对于当前元素的横坐标</li><li><code>locationY</code> - 触摸点相对于当前元素的纵坐标</li><li><code>pageX</code> - 触摸点相对于根元素的横坐标</li><li><code>pageY</code> - 触摸点相对于根元素的纵坐标</li><li><code>target</code> - 触摸点所在的元素 ID</li><li><code>timestamp</code> - 触摸事件的时间戳，可用于移动速度的计算</li><li><code>touches</code> - 当前屏幕上的所有触摸点的集合</li></ul></li></ul><h3 id="捕获-shouldset-事件处理"><a class="header-anchor" href="#捕获-shouldset-事件处理" aria-hidden="true">#</a> 捕获 ShouldSet 事件处理</h3><p><code>onStartShouldSetResponder</code>与<code>onMoveShouldSetResponder</code>是以冒泡的形式调用的，即嵌套最深的节点最先调用。这意味着当多个 View 同时在<code>*ShouldSetResponder</code>中返回 true 时，最底层的 View 将优先“夺权”。在多数情况下这并没有什么问题，因为这样可以确保所有控件和按钮是可用的。</p><p>但是有些时候，某个父 View 会希望能先成为响应者。我们可以利用“捕获期”来解决这一需求。响应系统在从最底层的组件开始冒泡之前，会首先执行一个“捕获期”，在此期间会触发<code>on*ShouldSetResponderCapture</code>系列事件。因此，如果某个父 View 想要在触摸操作开始时阻止子组件成为响应者，那就应该处理<code>onStartShouldSetResponderCapture</code>事件并返回 true 值。</p><ul><li><code>View.props.onStartShouldSetResponderCapture: (evt) =&gt; true,</code></li><li><code>View.props.onMoveShouldSetResponderCapture: (evt) =&gt; true,</code></li></ul><h2 id="网络连接"><a class="header-anchor" href="#网络连接" aria-hidden="true">#</a> 网络连接</h2><p>React Native 提供了和 web 标准一致的<a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer">Fetch API</a>，用于满足开发者访问网络的需求。当然也可以使用第三方库(axios 之类的)</p><h3 id="fetch"><a class="header-anchor" href="#fetch" aria-hidden="true">#</a> Fetch</h3><blockquote><p>如果对 Fetch 不熟悉的话，可以先看看<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer">MDN 文档</a></p></blockquote><p>使用 Fetch 来实现一个网络请求；要求：点击一个按钮发送请求，获取到数据后展示在页面上；</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>学习环节可以先用一些免费的在线 API 做测试，当然也可以自己搭建；推荐使用<a href="https://jsonplaceholder.typicode.com/" target="_blank" rel="noopener noreferrer">JSONPlacehodler</a>，在线的、免费的、拿来即用的 RESTful 风格的接口。</p></div><p>代码如下：</p><div class="language-js"><pre><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    View<span class="token punctuation">,</span>
    Text<span class="token punctuation">,</span>
    Button<span class="token punctuation">,</span>
    StyleSheet<span class="token punctuation">,</span>
    FlatList<span class="token punctuation">,</span>
    SafeAreaView<span class="token punctuation">,</span>
    ActivityIndicator
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-native&#39;</span>
<span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">&#39;../../components/loading/Loading&#39;</span>

<span class="token comment">// 创建样式</span>
<span class="token keyword">const</span> style <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    text<span class="token operator">:</span> <span class="token punctuation">{</span>
        fontSize<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
        color<span class="token operator">:</span> <span class="token string">&#39;skyblue&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    button<span class="token operator">:</span> <span class="token punctuation">{</span>
        width<span class="token operator">:</span> <span class="token string">&#39;40%&#39;</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
        borderWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        borderColor<span class="token operator">:</span> <span class="token string">&#39;red&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    item<span class="token operator">:</span> <span class="token punctuation">{</span>
        fontSize<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>
        fontWeight<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">500</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        color<span class="token operator">:</span> <span class="token string">&#39;#333&#39;</span><span class="token punctuation">,</span>
        marginTop<span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    flatList<span class="token operator">:</span> <span class="token punctuation">{</span>
        borderColor<span class="token operator">:</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span>
        borderWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        width<span class="token operator">:</span> <span class="token string">&#39;95%&#39;</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token string">&#39;100%&#39;</span><span class="token punctuation">,</span>
        marginLeft<span class="token operator">:</span> <span class="token string">&#39;auto&#39;</span><span class="token punctuation">,</span>
        marginRight<span class="token operator">:</span> <span class="token string">&#39;auto&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">LinFetch</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        loading<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取数据</span>
    <span class="token keyword">async</span> <span class="token function">handleFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://jsonplaceholder.typicode.com/todos</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> result<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">,</span> loading<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 下拉加载</span>
    <span class="token function">handleOnRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> loading<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 上拉加载</span>
    <span class="token function">handleOnEndReached</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> loading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> loading<span class="token operator">:</span> <span class="token operator">!</span>loading <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> loading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token string">&#39;100%&#39;</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token string">&#39;100%&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&gt;</span>fetch request<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Button
                    style<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>button<span class="token punctuation">}</span>
                    onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                    title<span class="token operator">=</span><span class="token string">&quot;request&quot;</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>SafeAreaView
                    style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token string">&#39;100%&#39;</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token string">&#39;100%&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                <span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>FlatList
                        style<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>flatList<span class="token punctuation">}</span>
                        data<span class="token operator">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span>
                        refreshing<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span>
                        onRefresh<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleOnRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                        onEndReached<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleOnEndReached</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                        keyExtractor<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
                        renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> item <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                            <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>item<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
                        <span class="token punctuation">)</span><span class="token punctuation">}</span>
                        ListFooterComponent<span class="token operator">=</span><span class="token punctuation">{</span>loading <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Loading <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
                    <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>SafeAreaView<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>在配置下拉刷新时，必须设置<code>refreshing</code>属性，否则将报如下图所示错误</p><p><img src="/assets/image-20210610173310515.26e5c628.png" alt="image-20210610173310515"></p></div><p>最后效果图如下：</p><p><img src="/assets/image-20210610-174611.5f190a27.gif" alt=""></p><h3 id="axios"><a class="header-anchor" href="#axios" aria-hidden="true">#</a> Axios</h3><blockquote><p>其实这些使用方法和开发 web 端应用时的方法如出一辙，如果还不熟悉 axios 可以去<a href="https://axios-http.com/" target="_blank" rel="noopener noreferrer">axios 官网</a>熟悉熟悉。</p></blockquote><ul><li><p>安装</p><div class="language-shell"><pre><code>$ <span class="token function">npm</span> i axios
or
$ <span class="token function">yarn</span> <span class="token function">add</span> axios
</code></pre></div></li><li><p>请求 JSONPlaceholder 中的图片</p><div class="language-jsx"><pre><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>
    albumId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    isLoading<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleGetData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token function">handleGetData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> albumId<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
    		<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://jsonplaceholder.typicode.com/albums/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>albumId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/photos</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        data<span class="token operator">:</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> <span class="token operator">...</span>result<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span>
        isLoading<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>视图展示</p><div class="language-jsx"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FlatList</span></span>
    <span class="token attr-name">data</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span>
    <span class="token attr-name">renderItem</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> item <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Image</span></span>
                <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>stretch<span class="token punctuation">}</span></span>
                <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> uri<span class="token operator">:</span> item<span class="token punctuation">.</span>url <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">resizeMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contain<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">keyExtractor</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>
    <span class="token attr-name">onEndReached</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleOnEndReached</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><img src="/assets/image-20210610181440491.808b4ac3.png" alt="image-20210610181440491"></p></li></ul><p>​ 完整代码如下：</p><div class="language-jsx"><pre><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text<span class="token punctuation">,</span> Image<span class="token punctuation">,</span> StyleSheet<span class="token punctuation">,</span> FlatList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-native&#39;</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    text<span class="token operator">:</span> <span class="token punctuation">{</span>
        fontSize<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
        fontWeight<span class="token operator">:</span> <span class="token string">&#39;600&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    stretch<span class="token operator">:</span> <span class="token punctuation">{</span>
        width<span class="token operator">:</span> <span class="token string">&#39;100%&#39;</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
        resizeMode<span class="token operator">:</span> <span class="token string">&#39;stretch&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">LinAxios</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        albumId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        isLoading<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleGetData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取数据</span>
    <span class="token keyword">async</span> <span class="token function">handleGetData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> albumId<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://jsonplaceholder.typicode.com/albums/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>albumId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/photos</span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;albmId:&#39;</span><span class="token punctuation">,</span> albumId<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token operator">:</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> <span class="token operator">...</span>result<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> isLoading<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 上拉加载</span>
    <span class="token keyword">async</span> <span class="token function">handleOnEndReached</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoading<span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            albumId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>albumId <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
            isLoading<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleGetData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state

        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">axios request</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FlatList</span></span>
                    <span class="token attr-name">data</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span>
                    <span class="token attr-name">renderItem</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> item <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Image</span></span>
                                <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>stretch<span class="token punctuation">}</span></span>
                                <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> uri<span class="token operator">:</span> item<span class="token punctuation">.</span>url <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                                <span class="token attr-name">resizeMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contain<span class="token punctuation">&quot;</span></span>
                            <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">keyExtractor</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>
                    <span class="token attr-name">onEndReached</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleOnEndReached</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
                <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> LinAxios
</code></pre></div><h2 id="websocket"><a class="header-anchor" href="#websocket" aria-hidden="true">#</a> WebSocket</h2><p>待完善……</p></div></div><footer class="page-footer" data-v-d36a7fda data-v-5a019cc9><div class="edit" data-v-5a019cc9><div class="edit-link" data-v-5a019cc9 data-v-3ae295f1><!----></div></div><div class="updated" data-v-5a019cc9><p class="last-updated" data-v-5a019cc9 data-v-52854a16><span class="prefix" data-v-52854a16>更新时间:</span><span class="datetime" data-v-52854a16></span></p></div></footer><div class="next-and-prev-link" data-v-d36a7fda data-v-6683615c><div class="container" data-v-6683615c><div class="prev" data-v-6683615c><a class="link" href="/front-end/react-native/02" data-v-6683615c><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-6683615c><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-6683615c>基本认识</span></a></div><div class="next" data-v-6683615c><a class="link" href="/front-end/react-native/04" data-v-6683615c><span class="text" data-v-6683615c>导航系统</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-6683615c><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"c6d55e8b\",\"go_01.md\":\"80e08083\",\"go_index.md\":\"ddbfbc34\",\"interview_index.md\":\"602858c5\",\"project_index.md\":\"b699f10e\",\"database_mongodb_01-mongodb.md\":\"1b9c3814\",\"database_mongodb_index.md\":\"6981f3fc\",\"database_mysql_index.md\":\"be41cd02\",\"database_redis_index.md\":\"800fadad\",\"front-end_babel_index.md\":\"9257a771\",\"front-end_js_base.md\":\"8361a31a\",\"front-end_js_index.md\":\"5178a9de\",\"front-end_nest_01.md\":\"ccd30a3f\",\"front-end_nest_index.md\":\"597a7ed3\",\"front-end_node_1-webpack5-node.md\":\"755b8785\",\"front-end_node_index.md\":\"4cd6f171\",\"front-end_react_index.md\":\"849df51d\",\"front-end_react-native_01.md\":\"745a96b8\",\"front-end_react-native_02.md\":\"a08dcb58\",\"front-end_react-native_03.md\":\"1f0db0b8\",\"front-end_react-native_04.md\":\"c69ed886\",\"front-end_react-native_05.md\":\"831c990b\",\"front-end_react-native_index.md\":\"8c8de587\",\"front-end_vue_index.md\":\"9190fec4\",\"front-end_webpack_index.md\":\"d8f001e3\",\"front-end_wechat_index.md\":\"f12b8d49\"}")</script>
    <script type="module" async src="/assets/app.f8fb6d57.js"></script>
  </body>
</html>